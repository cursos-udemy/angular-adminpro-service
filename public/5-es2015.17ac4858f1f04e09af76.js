(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+CcW":function(e,t,i){"use strict";i.r(t),i.d(t,"LayoutChildRoutingModule",(function(){return Ae}));var s=i("tyNb"),a=i("fXoL");let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Yb(0,"p"),a.Cc(1,"dashboard works!"),a.Xb())},encapsulation:2}),e})();var o=i("3Pt+");const c=["incrementerInput"];let n=(()=>{class e{constructor(){this.title="",this.value=0,this.step=5,this.onChangeValue=new a.q}ngOnInit(){this.step=this.step<0?0:this.step>100?100:this.step}increase(){this.value+=5,this.normalizeValue(),this.onChangeValue.emit(this.value)}enabledIncrease(){return this.value<100}decrease(){this.value-=5,this.normalizeValue(),this.onChangeValue.emit(this.value)}enabledDecrease(){return this.value>0}handleChangeValue(e){this.value=e,this.normalizeValue(),console.log(this.value),this.onChangeValue.emit(this.value),this.incrementerInput.nativeElement.value=this.value,this.incrementerInput.nativeElement.focus()}normalizeValue(){this.value<0&&(this.value=0),this.value>100&&(this.value=100)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["app-incrementer"]],viewQuery:function(e,t){var i;1&e&&a.Hc(c,!0),2&e&&a.uc(i=a.hc())&&(t.incrementerInput=i.first)},inputs:{title:"title",value:"value",step:"step"},outputs:{onChangeValue:"onChangeValue"},decls:10,vars:6,consts:[[1,"input-group"],["type","number","name","value","aria-label","Recipient's username with two button addons","aria-describedby","button-addon4",1,"form-control",3,"ngModel","min","max","ngModelChange"],["incrementerInput",""],["id","button-addon4",1,"input-group-append"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"mdi","mdi-plus"],[1,"mdi","mdi-minus"]],template:function(e,t){1&e&&(a.Yb(0,"h4"),a.Cc(1),a.Xb(),a.Yb(2,"div",0),a.Yb(3,"input",1,2),a.gc("ngModelChange",(function(e){return t.value=e}))("ngModelChange",(function(e){return t.handleChangeValue(e)})),a.Xb(),a.Yb(5,"div",3),a.Yb(6,"button",4),a.gc("click",(function(){return t.increase()})),a.Tb(7,"i",5),a.Xb(),a.Yb(8,"button",4),a.gc("click",(function(){return t.decrease()})),a.Tb(9,"i",6),a.Xb(),a.Xb(),a.Xb()),2&e&&(a.Hb(1),a.Dc(t.title),a.Hb(2),a.oc("ngModel",t.value)("min",0)("max",100),a.Hb(3),a.oc("disabled",!t.enabledIncrease()),a.Hb(2),a.oc("disabled",!t.enabledDecrease()))},directives:[o.n,o.b,o.i,o.l],encapsulation:2}),e})(),l=(()=>{class e{constructor(){this.percentage=89,this.percentage2=23}ngOnInit(){}handleChangeValue(e){this.percentage=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["app-progress"]],decls:20,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-success"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated"],[1,"col-6"],["title","Left",3,"value","onChangeValue"],["title","Right",3,"value","onChangeValue"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"h5",4),a.Cc(5,"Progress Bar"),a.Xb(),a.Yb(6,"div",5),a.Tb(7,"div",6),a.Xb(),a.Tb(8,"hr"),a.Yb(9,"div",5),a.Tb(10,"div",7),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(11,"div",0),a.Yb(12,"div",8),a.Yb(13,"div",2),a.Yb(14,"div",3),a.Yb(15,"app-incrementer",9),a.gc("onChangeValue",(function(e){return t.handleChangeValue(e)})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(16,"div",8),a.Yb(17,"div",2),a.Yb(18,"div",3),a.Yb(19,"app-incrementer",10),a.gc("onChangeValue",(function(e){return t.percentage2=e})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()),2&e&&(a.Hb(7),a.Ac("width",t.percentage+"%"),a.Ib("aria-valuenow",t.percentage),a.Hb(3),a.Ac("width",t.percentage2+"%"),a.Ib("aria-valuenow",t.percentage2),a.Hb(5),a.oc("value",t.percentage),a.Hb(4),a.oc("value",t.percentage2))},directives:[n],encapsulation:2}),e})();var b=i("LPYB");let d=(()=>{class e{constructor(){this.labels=[],this.data=[],this.doughnutChartType="doughnut"}ngOnInit(){}chartClicked({event:e,active:t}){console.log(e,t)}chartHovered({event:e,active:t}){console.log(e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["app-donut-chart"]],inputs:{labels:"labels",data:"data",title:"title"},decls:6,vars:4,consts:[[1,"card"],[1,"card-title","text-center","mt-3"],[1,"card-body"],[2,"display","block"],["baseChart","",3,"data","labels","chartType"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"h3",1),a.Cc(2),a.Xb(),a.Yb(3,"div",2),a.Yb(4,"div",3),a.Tb(5,"canvas",4),a.Xb(),a.Xb(),a.Xb()),2&e&&(a.Hb(2),a.Dc(t.title),a.Hb(3),a.oc("data",t.data)("labels",t.labels)("chartType",t.doughnutChartType))},directives:[b.a],encapsulation:2}),e})(),u=(()=>{class e{constructor(){this.graphics={chart1:{labels:["Con Frijoles","Con Natilla","Con tocino"],data:[24,30,46],type:"doughnut",title:"El pan se come con"},chart2:{labels:["Hombres","Mujeres"],data:[4500,6e3],type:"doughnut",title:"Entrevistados"},chart3:{labels:["Si","No"],data:[95,5],type:"doughnut",title:"\xbfLe dan gases los frijoles?"},chart4:{labels:["No","Si"],data:[85,15],type:"doughnut",title:"\xbfLe importa que le den gases?"}}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["app-chart"]],decls:10,vars:12,consts:[[1,"row"],[1,"col-6"],[3,"title","data","labels"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Tb(2,"app-donut-chart",2),a.Xb(),a.Yb(3,"div",1),a.Tb(4,"app-donut-chart",2),a.Xb(),a.Xb(),a.Yb(5,"div",0),a.Yb(6,"div",1),a.Tb(7,"app-donut-chart",2),a.Xb(),a.Yb(8,"div",1),a.Tb(9,"app-donut-chart",2),a.Xb(),a.Xb()),2&e&&(a.Hb(2),a.oc("title",t.graphics.chart1.title)("data",t.graphics.chart1.data)("labels",t.graphics.chart1.labels),a.Hb(2),a.oc("title",t.graphics.chart2.title)("data",t.graphics.chart2.data)("labels",t.graphics.chart2.labels),a.Hb(3),a.oc("title",t.graphics.chart3.title)("data",t.graphics.chart3.data)("labels",t.graphics.chart3.labels),a.Hb(2),a.oc("title",t.graphics.chart4.title)("data",t.graphics.chart4.data)("labels",t.graphics.chart4.labels))},directives:[d],encapsulation:2}),e})();var h=i("KQZp");let p=(()=>{class e{constructor(e){this.settingService=e}ngOnInit(){this.selectThemeFromSetting()}changeTheme(e,t){this.settingService.applyTheme(e),this.removeAllChecks(),this.applyCheckToSelectedTheme(t)}removeAllChecks(){const e=document.getElementsByClassName("selector");for(let t of e)t.classList.remove("working")}applyCheckToSelectedTheme(e){e.classList.add("working")}selectThemeFromSetting(){const e=this.settingService.config.theme,t=document.getElementsByClassName("selector");for(let i of t)if(e===i.getAttribute("data-theme"))return void this.applyCheckToSelectedTheme(i)}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(h.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-account-setting"]],decls:62,vars:0,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"r-panel-body"],["id","themecolors",1,"m-t-20"],["data-theme","default",1,"selector","default-theme",3,"click"],["linkThemeDefault",""],["data-theme","green",1,"selector","green-theme",3,"click"],["linkThemeGreen",""],["data-theme","red",1,"selector","red-theme",3,"click"],["linkThemeRed",""],["data-theme","blue",1,"selector","blue-theme",3,"click"],["linkThemeBlue",""],["data-theme","purple",1,"selector","purple-theme",3,"click"],["linkThemePurple",""],["data-theme","megna",1,"selector","megna-theme",3,"click"],["linkThemeMegna",""],[1,"d-block","m-t-30"],["data-theme","default-dark",1,"selector","default-dark-theme",3,"click"],["linkThemeDefaultDark",""],["data-theme","green-dark",1,"selector","green-dark-theme",3,"click"],["linkThemeGreenDark",""],["data-theme","red-dark",1,"selector","red-dark-theme",3,"click"],["linkThemeRedDark",""],["data-theme","blue-dark",1,"selector","blue-dark-theme",3,"click"],["linkThemeBlueDark",""],["data-theme","purple-dark",1,"selector","purple-dark-theme",3,"click"],["linkThemePurpleDark",""],["data-theme","megna-dark",1,"selector","megna-dark-theme",3,"click"],["linkThemeMegnaDark",""]],template:function(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"h3",4),a.Cc(5,"Themes"),a.Xb(),a.Yb(6,"div",5),a.Yb(7,"ul",6),a.Yb(8,"li"),a.Yb(9,"b"),a.Cc(10,"Sidebar Light"),a.Xb(),a.Xb(),a.Yb(11,"li"),a.Yb(12,"a",7,8),a.gc("click",(function(){a.wc(e);const i=a.vc(13);return t.changeTheme("default",i)})),a.Cc(14,"1"),a.Xb(),a.Xb(),a.Yb(15,"li"),a.Yb(16,"a",9,10),a.gc("click",(function(){a.wc(e);const i=a.vc(17);return t.changeTheme("green",i)})),a.Cc(18,"2"),a.Xb(),a.Xb(),a.Yb(19,"li"),a.Yb(20,"a",11,12),a.gc("click",(function(){a.wc(e);const i=a.vc(21);return t.changeTheme("red",i)})),a.Cc(22,"3"),a.Xb(),a.Xb(),a.Yb(23,"li"),a.Yb(24,"a",13,14),a.gc("click",(function(){a.wc(e);const i=a.vc(25);return t.changeTheme("blue",i)})),a.Cc(26,"4"),a.Xb(),a.Xb(),a.Yb(27,"li"),a.Yb(28,"a",15,16),a.gc("click",(function(){a.wc(e);const i=a.vc(29);return t.changeTheme("purple",i)})),a.Cc(30,"5"),a.Xb(),a.Xb(),a.Yb(31,"li"),a.Yb(32,"a",17,18),a.gc("click",(function(){a.wc(e);const i=a.vc(33);return t.changeTheme("megna",i)})),a.Cc(34,"6"),a.Xb(),a.Xb(),a.Yb(35,"li",19),a.Yb(36,"b"),a.Cc(37,"Sidebar Dark"),a.Xb(),a.Xb(),a.Yb(38,"li"),a.Yb(39,"a",20,21),a.gc("click",(function(){a.wc(e);const i=a.vc(40);return t.changeTheme("default-dark",i)})),a.Cc(41,"7"),a.Xb(),a.Xb(),a.Yb(42,"li"),a.Yb(43,"a",22,23),a.gc("click",(function(){a.wc(e);const i=a.vc(44);return t.changeTheme("green-dark",i)})),a.Cc(45,"8"),a.Xb(),a.Xb(),a.Yb(46,"li"),a.Yb(47,"a",24,25),a.gc("click",(function(){a.wc(e);const i=a.vc(48);return t.changeTheme("red-dark",i)})),a.Cc(49,"9"),a.Xb(),a.Xb(),a.Yb(50,"li"),a.Yb(51,"a",26,27),a.gc("click",(function(){a.wc(e);const i=a.vc(52);return t.changeTheme("blue-dark",i)})),a.Cc(53,"10"),a.Xb(),a.Xb(),a.Yb(54,"li"),a.Yb(55,"a",28,29),a.gc("click",(function(){a.wc(e);const i=a.vc(56);return t.changeTheme("purple-dark",i)})),a.Cc(57,"11"),a.Xb(),a.Xb(),a.Yb(58,"li"),a.Yb(59,"a",30,31),a.gc("click",(function(){a.wc(e);const i=a.vc(60);return t.changeTheme("megna-dark",i)})),a.Cc(61,"12"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()}},styles:["#themecolors[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {cursor: pointer}"]}),e})(),g=(()=>{class e{constructor(){this.countTo(3).then(e=>console.log("Exit with value: "+e)).catch(console.warn)}ngOnInit(){}countTo(e){return new Promise((t,i)=>{let s=0,a=setInterval(()=>{s++,console.log("counter: ",s),s>=e&&(t(s),clearInterval(a))},1e3)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["app-promises"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Yb(0,"p"),a.Cc(1,"promises works!"),a.Xb())},encapsulation:2}),e})();var m=i("HDdC"),f=i("7o/Q");class v{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new Y(e,this.count,this.source))}}class Y extends f.a{constructor(e,t,i){super(e),this.count=t,this.source=i}error(e){if(!this.isStopped){const{source:t,count:i}=this;if(0===i)return super.error(e);i>-1&&(this.count=i-1),t.subscribe(this._unsubscribeAndRecycle())}}}var X=i("lJxs"),k=i("pLZG");let C=(()=>{class e{constructor(){}ngOnInit(){this.countTo(4).pipe(function(e=-1){return t=>t.lift(new v(e,t))}(2)).subscribe(e=>console.log("countTo.value: ",e),e=>console.error("countTo.error: ",e),()=>console.log("Termino de ejecutarse el observador countTo")),this.adder(4).subscribe(e=>console.log("adder.value: ",e),e=>console.error("adder.error: ",e),()=>console.log("Termino de ejecutarse el observador adder")),this.oddSubscription=this.oddTo(10).subscribe(e=>console.log("oddTo.value: ",e),e=>console.error("oddTo.error: ",e),()=>console.log("Termino de ejecutarse el observador oddTo"))}ngOnDestroy(){console.log("destroy page rxjs"),this.oddSubscription&&(console.log("unsubscribe odd"),this.oddSubscription.unsubscribe())}countTo(e){return new m.a(t=>{let i=0,s=setInterval(()=>{i++,t.next(i),i>=e?(clearInterval(s),t.complete()):2==i&&t.error("Es un numero 2!")},1e3)})}adder(e){return new m.a(t=>{let i=0,s=setInterval(()=>{i++,t.next({status:"ok",value:i}),i>=e&&(clearInterval(s),t.complete())},1e3)}).pipe(Object(X.a)(e=>e.value))}oddTo(e){return new m.a(e=>{let t=0;setInterval(()=>{t++,e.next(t)},1e3)}).pipe(Object(k.a)(e=>e%2==1))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["app-rxjs"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Yb(0,"p"),a.Cc(1,"rxjs works!"),a.Xb())},encapsulation:2}),e})();var y=i("Xuht"),w=i("tk/3"),S=i("qfBg"),I=i("lGQG"),T=i("FO31"),H=i("5eHb"),P=i("ofXK"),U=i("bruO");function B(e,t){if(1&e&&(a.Tb(0,"img",23),a.lc(1,"image")),2&e){const e=a.kc();a.oc("src",a.mc(1,2,e.user.image),a.yc)("alt",e.user.name)}}function x(e,t){if(1&e&&a.Tb(0,"img",23),2&e){const e=a.kc();a.oc("src",e.imagePreview,a.yc)("alt",e.user.name)}}let O=(()=>{class e{constructor(e,t,i,s){this.userService=e,this.authService=t,this.fileUploadService=i,this.toastr=s}get user(){return this.authService.userAuthenticated}ngOnInit(){this.initialValues()}ngOnDestroy(){this.imageSelected=null,this.imagePreview=null}handleSubmit(e){e.invalid||this.userService.updateProfile(this.user._id,e.value).subscribe(e=>{this.toastr.success("your profile has been successfully updated",null,{closeButton:!0,progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})},e=>this.toastr.error(e.error.message,"Update Profile failed!",{disableTimeOut:!0,closeButton:!0}))}selectImage(e){if(this.imageSelected=e.target.files[0],!this.imageSelected)return void this.initialValues();if(this.imageSelected.type.indexOf("image")<0)return this.toastr.error("The file must be of the image type","Update image failed!",{closeButton:!0,timeOut:3e3}),void this.initialValues();const t=new FileReader;t.readAsDataURL(this.imageSelected),t.onloadend=()=>this.imagePreview=t.result,this.fileNameSelected=this.imageSelected.name}uploadImage(){this.imageSelected?this.fileUploadService.upload(this.imageSelected,this.user._id,"user").subscribe(e=>{e.type===w.c.Response&&(this.authService.notifyUserUpdated(e.body.modelUpdated),this.initialValues(),this.toastr.success("Your image has been successfully updated","Congratulations",{closeButton:!0,progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}))},e=>{console.log(e),this.toastr.error(e.error.error,"Update image failed!",{closeButton:!0,timeOut:3e3})}):(this.initialValues(),this.toastr.error("You must select an image","Update image failed!",{closeButton:!0,timeOut:3e3}))}initialValues(){this.imageSelected=null,this.fileNameSelected="Select an image"}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(S.a),a.Sb(I.a),a.Sb(T.a),a.Sb(H.b))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-profile"]],decls:43,vars:6,consts:[[1,"row","animated","fadeIn"],[1,"col-lg-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],["ngNativeValidate","",1,"form","p-t-20",3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["for","name"],[1,"input-group"],[1,"input-group-addon"],[1,"ti-user"],["id","name","type","text","name","name","placeholder","name","required","",1,"form-control",3,"ngModel"],["for","email"],[1,"ti-email"],["id","email","type","email","name","email","placeholder","Enter email","required","",1,"form-control",3,"disabled","ngModel"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10"],[1,"fa","fa-save"],["align","center",1,"card-body"],["class","w150",3,"src","alt",4,"ngIf"],["type","file","id","userImage","aria-describedby","userImage",1,"",3,"change"],["type","button",1,"btn","btn-block","btn-success","waves-effect","waves-light","m-r-10",3,"disabled","click"],[1,"w150",3,"src","alt"]],template:function(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"h4",4),a.Cc(5,"User Information"),a.Xb(),a.Yb(6,"h6",5),a.Cc(7,"made with bootstrap elements"),a.Xb(),a.Yb(8,"form",6,7),a.gc("ngSubmit",(function(){a.wc(e);const i=a.vc(9);return t.handleSubmit(i)})),a.Yb(10,"div",8),a.Yb(11,"label",9),a.Cc(12,"User Name"),a.Xb(),a.Yb(13,"div",10),a.Yb(14,"div",11),a.Tb(15,"i",12),a.Xb(),a.Tb(16,"input",13),a.Xb(),a.Xb(),a.Yb(17,"div",8),a.Yb(18,"label",14),a.Cc(19,"Email address"),a.Xb(),a.Yb(20,"div",10),a.Yb(21,"div",11),a.Tb(22,"i",15),a.Xb(),a.Tb(23,"input",16),a.Xb(),a.Xb(),a.Yb(24,"button",17),a.Tb(25,"i",18),a.Cc(26," Submit"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(27,"div",1),a.Yb(28,"div",2),a.Yb(29,"div",19),a.Yb(30,"h4",4),a.Cc(31,"User Image"),a.Xb(),a.Yb(32,"h6",5),a.Cc(33,"made with bootstrap elements"),a.Xb(),a.Yb(34,"div",8),a.Bc(35,B,2,4,"img",20),a.Bc(36,x,1,2,"img",20),a.Xb(),a.Yb(37,"input",21),a.gc("change",(function(e){return t.selectImage(e)})),a.Xb(),a.Tb(38,"br"),a.Tb(39,"br"),a.Yb(40,"button",22),a.gc("click",(function(){return t.uploadImage()})),a.Tb(41,"i",18),a.Cc(42," Update Image "),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()}2&e&&(a.Hb(16),a.oc("ngModel",t.user.name),a.Hb(7),a.oc("disabled",t.user.googleAccount)("ngModel",t.user.email),a.Hb(12),a.oc("ngIf",!t.imagePreview),a.Hb(1),a.oc("ngIf",t.imagePreview),a.Hb(4),a.oc("disabled",!t.imageSelected))},directives:[o.j,o.k,o.b,o.p,o.i,o.l,P.k],pipes:[U.a],encapsulation:2}),e})();var D=i("PSD3"),M=i.n(D),A=i("7k1j"),$=i("oOf3"),_=i("qC+V");function N(e,t){1&e&&(a.Yb(0,"label",25),a.Cc(1,"Google"),a.Xb())}function E(e,t){1&e&&(a.Yb(0,"label",26),a.Cc(1,"Application"),a.Xb())}function L(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",27),a.gc("click",(function(){a.wc(e);const t=a.kc().$implicit;return a.kc().handleDeleteUser(t)})),a.Tb(1,"i",28),a.Xb()}}function V(e,t){if(1&e){const e=a.Zb();a.Yb(0,"tr"),a.Yb(1,"td",17),a.Yb(2,"img",18),a.gc("click",(function(){a.wc(e);const i=t.$implicit;return a.kc().openUploadImageModal(i)})),a.lc(3,"image"),a.Xb(),a.Xb(),a.Yb(4,"td",9),a.Cc(5),a.Xb(),a.Yb(6,"td",9),a.Cc(7),a.Xb(),a.Yb(8,"td",9),a.Yb(9,"select",19),a.gc("change",(function(i){a.wc(e);const s=t.$implicit;return a.kc().onChangeRole(i,s)})),a.Yb(10,"option",20),a.Cc(11,"ROLE_USER"),a.Xb(),a.Yb(12,"option",21),a.Cc(13,"ROLE_ADMIN"),a.Xb(),a.Xb(),a.Xb(),a.Yb(14,"td",9),a.Bc(15,N,2,0,"label",22),a.Bc(16,E,2,0,"label",23),a.Xb(),a.Yb(17,"td",9),a.Bc(18,L,2,0,"button",24),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit,i=a.kc();a.Hb(2),a.oc("src",a.mc(3,8,e.image),a.yc),a.Hb(3),a.Dc(e.email),a.Hb(2),a.Dc(e.name),a.Hb(2),a.oc("ngModel",e.role)("disabled",i.isThisUser(e)),a.Hb(6),a.oc("ngIf",e.googleAccount),a.Hb(1),a.oc("ngIf",!e.googleAccount),a.Hb(2),a.oc("ngIf",!i.isThisUser(e))}}const j=function(e,t,i){return{itemsPerPage:e,currentPage:t,totalItems:i}},R=function(){return{backdropBackgroundColour:"rgba(0, 0, 0, 0.05)"}};let F=(()=>{class e{constructor(e,t,i,s){this.userService=e,this.authService=t,this.toastr=i,this.modalUploadService=s,this.itemsPerPage=4,this.currentPage=1,this.totalItems=0,this.users=[],this.loading=!1}get userAuthenticated(){return this.authService.userAuthenticated}ngOnInit(){this.getUsers(this.currentPage,this.itemsPerPage),this.uploadImageSubscription=this.modalUploadService.uploadNotificationEvent.subscribe(e=>{const t=this.users.find(t=>t._id===e.modelUpdated._id);t&&(t.image=e.modelUpdated.image),this.authService.notifyUserUpdated(e.modelUpdated)})}ngOnDestroy(){this.uploadImageSubscription.unsubscribe()}onPageChange(e){this.currentPage=e,this.getUsers(this.currentPage,this.itemsPerPage)}onKeyUpSearchText(){this.searchText&&this.searchText.trim().length>0?this.searchUsers(this.searchText.trim(),1,this.itemsPerPage):this.handlePaginator(this.lastSearch)}getUsers(e,t){this.loading=!0,this.userService.find(e,t).subscribe(e=>{this.handlePaginator(e),this.loading=!1,this.lastSearch=Object.assign(Object.assign({},e),{docs:[...e.docs]})},e=>this.loading=!1)}searchUsers(e,t,i){this.loading=!0,this.userService.search(e,t,i).subscribe(e=>{this.handlePaginator(e),this.loading=!1},e=>this.loading=!1)}handlePaginator(e){this.currentPage=e.page,this.totalItems=e.totalDocs,this.users=e.docs}handleDeleteUser(e){M.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:`\xbfAre you sure to delete user ${e.name}?`,text:"You will not be able to reverse this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Deleted!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(t=>{t.value&&this.userService.delete(e._id).subscribe(t=>{this.toastr.success(`User ${e.name} has been successfully removed.`,"Congratulations",{closeButton:!0,progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.users=this.users.filter(t=>t._id!=e._id),this.totalItems--},e=>this.toastr.error(e.error.message,"Delete user failed!",{closeButton:!0,timeOut:3e3}))})}isThisUser(e){return e._id===this.userAuthenticated._id}openUploadImageModal(e){this.modalUploadService.openModal("user",e._id,e.name,e.image)}onChangeRole(e,t){this.userService.updateRole(t._id,e.target.value).subscribe(e=>{t.role=e.role,this.toastr.success(`${e.name} now has the role ${e.role}.`,"Congratulations",{closeButton:!0,timeOut:3e3})},i=>{this.toastr.error(i.error.message,"Update user role failed!",{closeButton:!0,timeOut:3e3}),e.target.value=t.role})}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(S.a),a.Sb(I.a),a.Sb(H.b),a.Sb(A.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-users"]],decls:37,vars:13,consts:[[1,"row","animated","fadeIn"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Search users",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"card-title"],[1,"badge","badge-secondary"],[1,"table","table-hover"],[1,"thead-default"],[1,"val-middle"],[1,"w190","val-middle"],[1,"w100","val-middle"],[4,"ngFor","ngForOf"],["colspan","12 val-middle"],[1,"text-right"],[3,"pageChange"],[1,"animated","fadeIn",3,"show","config"],["data-toggle","modal","data-target","#exampleModal",1,"w70","val-middle"],[1,"img-50","img-circle","pointer",3,"src","click"],["name","role",1,"form-control",3,"ngModel","disabled","change"],["value","ROLE_USER"],["value","ROLE_ADMIN"],["class","label label-danger",4,"ngIf"],["class","label label-info",4,"ngIf"],["class","btn btn-danger ml-2",3,"click",4,"ngIf"],[1,"label","label-danger"],[1,"label","label-info"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"fa","fa-trash-o"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"input",4),a.gc("ngModelChange",(function(e){return t.searchText=e}))("keyup",(function(){return t.onKeyUpSearchText()})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(5,"div",0),a.Yb(6,"div",1),a.Yb(7,"div",2),a.Yb(8,"div",3),a.Yb(9,"h3",5),a.Cc(10,"Registered users: "),a.Yb(11,"span",6),a.Cc(12),a.Xb(),a.Xb(),a.Yb(13,"table",7),a.Yb(14,"thead",8),a.Yb(15,"tr"),a.Yb(16,"th",9),a.Cc(17,"Image"),a.Xb(),a.Yb(18,"th",9),a.Cc(19,"Email"),a.Xb(),a.Yb(20,"th",9),a.Cc(21,"Name"),a.Xb(),a.Yb(22,"th",10),a.Cc(23,"Role"),a.Xb(),a.Yb(24,"th",11),a.Cc(25,"Auth By"),a.Xb(),a.Yb(26,"th",11),a.Cc(27,"Actions"),a.Xb(),a.Xb(),a.Xb(),a.Yb(28,"tbody"),a.Bc(29,V,19,10,"tr",12),a.lc(30,"paginate"),a.Xb(),a.Yb(31,"tfoot"),a.Yb(32,"tr"),a.Yb(33,"td",13),a.Yb(34,"div",14),a.Yb(35,"pagination-controls",15),a.gc("pageChange",(function(e){return t.onPageChange(e)})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Tb(36,"ngx-loading",16),a.Xb()),2&e&&(a.Hb(4),a.oc("ngModel",t.searchText),a.Hb(8),a.Dc(t.totalItems),a.Hb(17),a.oc("ngForOf",a.nc(30,5,t.users,a.sc(8,j,t.itemsPerPage,t.currentPage,t.totalItems))),a.Hb(7),a.oc("show",t.loading)("config",a.pc(12,R)))},directives:[o.b,o.i,o.l,P.j,$.c,_.a,o.q,o.m,o.s,P.k],pipes:[$.b,U.a],encapsulation:2}),e})();var q=i("AytR");let Z=(()=>{class e{constructor(e){this.http=e}find(e=1,t=100){const i=this.getHttpHeaders();return this.http.get(`${q.a.hospitalServiceUrl}/hospital?page=${e}&limit=${t}`,i)}findById(e){const t=this.getHttpHeaders();return this.http.get(`${q.a.hospitalServiceUrl}/hospital/${e}`,t)}search(e,t=1,i=100){const s=this.getHttpHeaders();return this.http.get(`${q.a.hospitalServiceUrl}/search/hospital/${e}?page=${t}&limit=${i}`,s)}update(e,t){const i=this.getHttpHeaders();return this.http.put(`${q.a.hospitalServiceUrl}/hospital/${e}`,{name:t},i)}delete(e){const t=this.getHttpHeaders();return this.http.delete(`${q.a.hospitalServiceUrl}/hospital/${e}`,t)}save(e){const t=this.getHttpHeaders();return this.http.post(q.a.hospitalServiceUrl+"/hospital/",{name:e},t)}getHttpHeaders(){const e=localStorage.getItem("APP-TOKEN");return{headers:new w.d({"Content-Type":"application/json",Authorization:"Bearer "+e})}}}return e.\u0275fac=function(t){return new(t||e)(a.cc(w.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function K(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",25),a.gc("click",(function(){a.wc(e);const t=a.kc().$implicit;return a.kc().handleUpdateHospital(t)})),a.Tb(1,"i",26),a.Xb()}}function G(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",27),a.gc("click",(function(){a.wc(e);const t=a.kc().$implicit;return a.kc().handleDeleteHospital(t)})),a.Tb(1,"i",28),a.Xb()}}function z(e,t){if(1&e){const e=a.Zb();a.Yb(0,"tr"),a.Yb(1,"td",19),a.Yb(2,"img",20),a.gc("click",(function(){a.wc(e);const i=t.$implicit;return a.kc().openUploadImageModal(i)})),a.lc(3,"image"),a.Xb(),a.Xb(),a.Yb(4,"td",13),a.Yb(5,"input",21),a.gc("ngModelChange",(function(i){return a.wc(e),t.$implicit.name=i})),a.Xb(),a.Xb(),a.Yb(6,"td",22),a.Bc(7,K,2,0,"button",23),a.Bc(8,G,2,0,"button",24),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit,i=a.kc();a.Hb(2),a.oc("src",a.nc(3,4,e.image,"hospital"),a.yc),a.Hb(3),a.oc("ngModel",e.name),a.Hb(2),a.oc("ngIf",i.isUserAdmin()),a.Hb(1),a.oc("ngIf",i.isUserAdmin())}}const J=function(e,t,i){return{itemsPerPage:e,currentPage:t,totalItems:i}},Q=function(){return{backdropBackgroundColour:"rgba(0, 0, 0, 0.05)"}};let W=(()=>{class e{constructor(e,t,i){this.hospitalService=e,this.toastr=t,this.modalUploadService=i,this.hospitals=[],this.itemsPerPage=4,this.currentPage=1,this.totalItems=0,this.loading=!1}ngOnInit(){this.getHospitals(this.currentPage,this.itemsPerPage),this.uploadImageSubscription=this.modalUploadService.uploadNotificationEvent.subscribe(e=>{const t=this.hospitals.find(t=>t._id===e.modelUpdated._id);t&&(t.image=e.modelUpdated.image)})}ngOnDestroy(){this.uploadImageSubscription.unsubscribe()}onPageChange(e){this.currentPage=e,this.updateHospitalList()}onKeyUpSearchText(){this.updateHospitalList()}updateHospitalList(){this.searchText&&this.searchText.trim().length>0?this.searchHospitals(this.searchText.trim(),1,this.itemsPerPage):this.getHospitals(this.currentPage,this.itemsPerPage)}getHospitals(e,t){this.loading=!0,this.hospitalService.find(e,t).subscribe(e=>{this.handlePaginator(e),this.loading=!1},e=>this.loading=!1)}searchHospitals(e,t,i){this.loading=!0,this.hospitalService.search(e,t,i).subscribe(e=>{this.handlePaginator(e),this.loading=!1},e=>this.loading=!1)}handlePaginator(e){this.currentPage=e.page,this.totalItems=e.totalDocs,this.hospitals=e.docs}handleDeleteHospital(e){M.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:`\xbfAre you sure to delete hospital ${e.name}?`,text:"You will not be able to reverse this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Deleted!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(t=>{t.value&&this.hospitalService.delete(e._id).subscribe(t=>{this.toastr.success(`Hospital ${e.name} has been successfully removed.`,"Congratulations",{closeButton:!0,timeOut:3e3}),this.hospitals=this.hospitals.filter(t=>t._id!=e._id),this.totalItems--},e=>this.toastr.error(e.error.message,"Delete hospital failed!",{closeButton:!0,timeOut:3e3}))})}addHospitalModal(){M.a.fire({title:"New Hospital",input:"text",inputPlaceholder:"Enter the hospital name",cancelButtonText:"Cancel",showCancelButton:!0,inputValidator:e=>e?0===e.trim().length?"Hospital name is required11!!":void 0:"Hospital name is required!"}).then(e=>{e.isConfirmed&&this.hospitalService.save(e.value).subscribe(e=>{this.toastr.success(`Hospital ${e.name} has been successfully created.`,"Congratulations",{closeButton:!0,timeOut:3e3}),this.updateHospitalList()},e=>this.toastr.error(e.error.message,"Create hospital failed!",{closeButton:!0,timeOut:3e3}))}).catch(e=>console.log(e))}handleUpdateHospital(e){this.hospitalService.update(e._id,e.name).subscribe(e=>{this.toastr.success(`Hospital ${e.name} has been successfully updated.`,"Congratulations",{closeButton:!0,timeOut:3e3}),this.hospitals=this.hospitals.map(t=>(t._id===e._id&&(t.name=e.name),t))},e=>this.toastr.error(e.error.message,"Update hospital failed!",{closeButton:!0,timeOut:3e3}))}isUserAdmin(){return!0}openUploadImageModal(e){this.modalUploadService.openModal("hospital",e._id,e.name,e.image)}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(Z),a.Sb(H.b),a.Sb(A.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-hospitals"]],decls:37,vars:13,consts:[[1,"row","animated","fadeIn"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Search hospitals",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"row"],[1,"col-8"],[1,"card-title"],[1,"badge","badge-secondary"],[1,"col-4","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"table","table-bordered","table-hover"],[1,"val-middle"],[4,"ngFor","ngForOf"],["colspan","12"],[1,"text-right"],[3,"pageChange"],[1,"animated","fadeIn",3,"show","config"],[1,"w70","val-middle"],[1,"img-50","img-circle","pointer",3,"src","click"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"w120","val-middle"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger  ml-2",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"fa","fa-trash-o"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"input",4),a.gc("ngModelChange",(function(e){return t.searchText=e}))("keyup",(function(){return t.onKeyUpSearchText()})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(5,"div",0),a.Yb(6,"div",1),a.Yb(7,"div",2),a.Yb(8,"div",3),a.Yb(9,"div",5),a.Yb(10,"div",6),a.Yb(11,"h3",7),a.Cc(12,"Registered hospitals: "),a.Yb(13,"span",8),a.Cc(14),a.Xb(),a.Xb(),a.Xb(),a.Yb(15,"div",9),a.Yb(16,"button",10),a.gc("click",(function(){return t.addHospitalModal()})),a.Tb(17,"i",11),a.Cc(18," Add Hospital"),a.Xb(),a.Xb(),a.Xb(),a.Yb(19,"table",12),a.Yb(20,"thead"),a.Yb(21,"tr"),a.Yb(22,"th",13),a.Cc(23,"Image"),a.Xb(),a.Yb(24,"th",13),a.Cc(25,"name"),a.Xb(),a.Yb(26,"th",13),a.Cc(27,"Actions"),a.Xb(),a.Xb(),a.Xb(),a.Yb(28,"tbody"),a.Bc(29,z,9,7,"tr",14),a.lc(30,"paginate"),a.Xb(),a.Yb(31,"tfoot"),a.Yb(32,"tr"),a.Yb(33,"td",15),a.Yb(34,"div",16),a.Yb(35,"pagination-controls",17),a.gc("pageChange",(function(e){return t.onPageChange(e)})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Tb(36,"ngx-loading",18),a.Xb()),2&e&&(a.Hb(4),a.oc("ngModel",t.searchText),a.Hb(10),a.Dc(t.totalItems),a.Hb(15),a.oc("ngForOf",a.nc(30,5,t.hospitals,a.sc(8,J,t.itemsPerPage,t.currentPage,t.totalItems))),a.Hb(7),a.oc("show",t.loading)("config",a.pc(12,Q)))},directives:[o.b,o.i,o.l,P.j,$.c,_.a,P.k],pipes:[$.b,U.a],encapsulation:2}),e})(),ee=(()=>{class e{constructor(e){this.http=e}find(e=1,t=100){const i=this.getHttpHeaders();return this.http.get(`${q.a.hospitalServiceUrl}/doctor?page=${e}&limit=${t}`,i)}findById(e){const t=this.getHttpHeaders();return this.http.get(`${q.a.hospitalServiceUrl}/doctor/${e}`,t)}search(e,t=1,i=100){const s=this.getHttpHeaders();return this.http.get(`${q.a.hospitalServiceUrl}/search/doctor/${e}?page=${t}&limit=${i}`,s)}delete(e){const t=this.getHttpHeaders();return this.http.delete(`${q.a.hospitalServiceUrl}/doctor/${e}`,t)}save(e){const t=this.getHttpHeaders();return this.http.post(q.a.hospitalServiceUrl+"/doctor",e,t)}update(e,t){const i=this.getHttpHeaders();return this.http.put(`${q.a.hospitalServiceUrl}/doctor/${e}`,t,i)}getHttpHeaders(){const e=localStorage.getItem("APP-TOKEN");return{headers:new w.d({"Content-Type":"application/json",Authorization:"Bearer "+e})}}}return e.\u0275fac=function(t){return new(t||e)(a.cc(w.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const te=function(e){return["/doctor",e]};function ie(e,t){if(1&e&&(a.Yb(0,"button",24),a.Tb(1,"i",25),a.Xb()),2&e){const e=a.kc().$implicit;a.oc("routerLink",a.qc(1,te,e._id))}}function se(e,t){if(1&e){const e=a.Zb();a.Yb(0,"button",26),a.gc("click",(function(){a.wc(e);const t=a.kc().$implicit;return a.kc().handleDeleteDoctor(t)})),a.Tb(1,"i",27),a.Xb()}}function ae(e,t){if(1&e){const e=a.Zb();a.Yb(0,"tr"),a.Yb(1,"td",19),a.Yb(2,"img",20),a.gc("click",(function(){a.wc(e);const i=t.$implicit;return a.kc().openUploadImageModal(i)})),a.lc(3,"image"),a.Xb(),a.Xb(),a.Yb(4,"td",13),a.Cc(5),a.Xb(),a.Yb(6,"td",13),a.Cc(7),a.Xb(),a.Yb(8,"td",21),a.Bc(9,ie,2,3,"button",22),a.Bc(10,se,2,0,"button",23),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit,i=a.kc();a.Hb(2),a.oc("src",a.nc(3,5,e.image,"doctor"),a.yc),a.Hb(3),a.Dc(e.name),a.Hb(2),a.Dc(e.hospital.name),a.Hb(2),a.oc("ngIf",i.isUserAdmin()),a.Hb(1),a.oc("ngIf",i.isUserAdmin())}}const re=function(e,t,i){return{itemsPerPage:e,currentPage:t,totalItems:i}},oe=function(){return{backdropBackgroundColour:"rgba(0, 0, 0, 0.05)"}};let ce=(()=>{class e{constructor(e,t,i){this.doctorService=e,this.toastr=t,this.modalUploadService=i,this.doctors=[],this.itemsPerPage=4,this.currentPage=1,this.totalItems=0,this.loading=!1}ngOnInit(){this.getDoctors(this.currentPage,this.itemsPerPage),this.uploadImageSubscription=this.modalUploadService.uploadNotificationEvent.subscribe(e=>{const t=this.doctors.find(t=>t._id===e.modelUpdated._id);t&&(t.image=e.modelUpdated.image)})}ngOnDestroy(){this.uploadImageSubscription.unsubscribe()}onPageChange(e){this.currentPage=e,this.updateDoctorList()}onKeyUpSearchText(){this.updateDoctorList()}updateDoctorList(){this.searchText&&this.searchText.trim().length>0?this.searchDoctors(this.searchText.trim(),1,this.itemsPerPage):this.getDoctors(this.currentPage,this.itemsPerPage)}getDoctors(e,t){this.loading=!0,this.doctorService.find(e,t).subscribe(e=>{this.handlePaginator(e),this.loading=!1},e=>this.loading=!1)}searchDoctors(e,t,i){this.loading=!0,this.doctorService.search(e,t,i).subscribe(e=>{this.handlePaginator(e),this.loading=!1},e=>this.loading=!1)}handlePaginator(e){this.currentPage=e.page,this.totalItems=e.totalDocs,this.doctors=e.docs}openUploadImageModal(e){this.modalUploadService.openModal("doctor",e._id,e.name,e.image)}handleDeleteDoctor(e){M.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:`\xbfAre you sure to delete doctor ${e.name}?`,text:"You will not be able to reverse this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Deleted!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(t=>{t.value&&this.doctorService.delete(e._id).subscribe(t=>{this.toastr.success(`User ${e.name} has been successfully removed.`,"Congratulations",{closeButton:!0,timeOut:3e3}),this.doctors=this.doctors.filter(t=>t._id!=e._id),this.totalItems--},e=>this.toastr.error(e.error.message,"Delete doctor failed!",{closeButton:!0,timeOut:3e3}))})}isUserAdmin(){return!0}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(ee),a.Sb(H.b),a.Sb(A.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-doctors"]],decls:39,vars:13,consts:[[1,"row","animated","fadeIn"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Search doctors",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"row"],[1,"col-8"],[1,"card-title"],[1,"badge","badge-secondary"],[1,"col-4","text-right"],["type","button","routerLink","/doctor",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"table","table-hover"],[1,"val-middle"],[4,"ngFor","ngForOf"],["colspan","12"],[1,"text-right"],[3,"pageChange"],[1,"animated","fadeIn",3,"show","config"],[1,"w70","val-middle"],[1,"img-50","img-circle","pointer",3,"src","click"],[1,"w120","val-middle"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],["class","btn btn-danger  ml-2",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-pencil"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"fa","fa-trash-o"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"input",4),a.gc("ngModelChange",(function(e){return t.searchText=e}))("keyup",(function(){return t.onKeyUpSearchText()})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(5,"div",0),a.Yb(6,"div",1),a.Yb(7,"div",2),a.Yb(8,"div",3),a.Yb(9,"div",5),a.Yb(10,"div",6),a.Yb(11,"h3",7),a.Cc(12,"Registered dotors: "),a.Yb(13,"span",8),a.Cc(14),a.Xb(),a.Xb(),a.Xb(),a.Yb(15,"div",9),a.Yb(16,"button",10),a.Tb(17,"i",11),a.Cc(18," Add Doctor"),a.Xb(),a.Xb(),a.Xb(),a.Yb(19,"table",12),a.Yb(20,"thead"),a.Yb(21,"tr"),a.Yb(22,"th",13),a.Cc(23,"Image"),a.Xb(),a.Yb(24,"th",13),a.Cc(25,"name"),a.Xb(),a.Yb(26,"th",13),a.Cc(27,"hospital"),a.Xb(),a.Yb(28,"th",13),a.Cc(29,"Actions"),a.Xb(),a.Xb(),a.Xb(),a.Yb(30,"tbody"),a.Bc(31,ae,11,8,"tr",14),a.lc(32,"paginate"),a.Xb(),a.Yb(33,"tfoot"),a.Yb(34,"tr"),a.Yb(35,"td",15),a.Yb(36,"div",16),a.Yb(37,"pagination-controls",17),a.gc("pageChange",(function(e){return t.onPageChange(e)})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Tb(38,"ngx-loading",18),a.Xb()),2&e&&(a.Hb(4),a.oc("ngModel",t.searchText),a.Hb(10),a.Dc(t.totalItems),a.Hb(17),a.oc("ngForOf",a.nc(32,5,t.doctors,a.sc(8,re,t.itemsPerPage,t.currentPage,t.totalItems))),a.Hb(7),a.oc("show",t.loading)("config",a.pc(12,oe)))},directives:[o.b,o.i,o.l,s.d,P.j,$.c,_.a,P.k],pipes:[$.b,U.a],encapsulation:2}),e})();var ne=i("quSY");class le extends ne.a{constructor(e,t){super()}schedule(e,t=0){return this}}class be extends le{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,s=void 0;try{this.work(e)}catch(a){i=!0,s=!!a&&a||new Error(a)}if(i)return this.unsubscribe(),s}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let de=(()=>{class e{constructor(t,i=e.now){this.SchedulerAction=t,this.now=i}schedule(e,t=0,i){return new this.SchedulerAction(this,e).schedule(i,t)}}return e.now=()=>Date.now(),e})();class ue extends de{constructor(e,t=de.now){super(e,()=>ue.delegate&&ue.delegate!==this?ue.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return ue.delegate&&ue.delegate!==this?ue.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const he=new ue(be);var pe=i("EY2u"),ge=i("LRne");let me=(()=>{class e{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return Object(ge.a)(this.value);case"E":return e=this.error,new m.a(t=>t.error(e));case"C":return Object(pe.b)()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class fe{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new ve(e,this.delay,this.scheduler))}}class ve extends f.a{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,s=e.scheduler,a=e.destination;for(;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(a);if(i.length>0){const t=Math.max(0,i[0].time-s.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(ve.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new Ye(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(me.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(me.createComplete()),this.unsubscribe()}}class Ye{constructor(e,t){this.time=e,this.notification=t}}function Xe(e,t){if(1&e&&(a.Yb(0,"option",19),a.Cc(1),a.Xb()),2&e){const e=t.$implicit;a.oc("value",e._id),a.Hb(1),a.Dc(e.name)}}function ke(e,t){if(1&e&&(a.Yb(0,"button",20),a.Tb(1,"i",21),a.Cc(2," Confirm"),a.Xb()),2&e){const e=a.kc();a.oc("disabled",e.form.invalid)}}function Ce(e,t){if(1&e&&(a.Yb(0,"label"),a.Cc(1),a.Xb()),2&e){const e=a.kc();a.Hb(1),a.Dc(e.hospitalModel.name)}}function ye(e,t){if(1&e&&(a.Tb(0,"img",22),a.lc(1,"image")),2&e){const e=a.kc();a.oc("src",a.nc(1,2,e.hospitalModel.image,"hospital"),a.yc)("alt",e.hospitalModel.name)}}function we(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",14),a.Yb(1,"div",2),a.Yb(2,"div",3),a.Yb(3,"h4",4),a.Cc(4,"Image"),a.Xb(),a.Yb(5,"div",6),a.Yb(6,"label"),a.Cc(7),a.Xb(),a.Xb(),a.Yb(8,"div",16),a.Yb(9,"img",23),a.gc("click",(function(){return a.wc(e),a.kc().openUploadImageModal()})),a.lc(10,"image"),a.Xb(),a.Xb(),a.Yb(11,"button",24),a.gc("click",(function(){return a.wc(e),a.kc().openUploadImageModal()})),a.Tb(12,"i",21),a.Cc(13," Update Image "),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=a.kc();a.Hb(7),a.Dc(e.doctor.name),a.Hb(2),a.oc("src",a.nc(10,3,e.doctor.image,"doctor"),a.yc)("alt",e.doctor.name)}}let Se=(()=>{class e{constructor(e,t,i,s,a,r,c){this.doctorService=e,this.hospitalService=t,this.toastr=i,this.router=s,this.route=a,this.fb=r,this.modalUploadService=c,this.doctor=null,this.hospitalModel={_id:null,name:null},this.form=this.fb.group({name:["",o.r.required],hospital:["",o.r.required]})}get name(){return this.form.get("name")}get hospital(){return this.form.get("hospital")}ngOnInit(){this.hospitals=[],this.route.params.subscribe(e=>{const t=e.id;t&&this.loadDoctor(t)}),this.hospitalService.find().subscribe(e=>this.hospitals=e.docs),this.hospital.valueChanges.subscribe(e=>{if(this.hospitalModel={_id:null,name:null},e){const t=this.hospitals.find(t=>t._id===e);t&&(this.hospitalModel=t)}}),this.uploadImageSubscription=this.modalUploadService.uploadNotificationEvent.subscribe(e=>this.doctor.image=e.modelUpdated.image)}ngOnDestroy(){this.uploadImageSubscription.unsubscribe()}loadDoctor(e){this.doctorService.findById(e).pipe(function(e,t=he){var i;const s=(i=e)instanceof Date&&!isNaN(+i)?+e-t.now():Math.abs(e);return e=>e.lift(new fe(s,t))}(0)).subscribe(e=>{e?(this.doctor=e,this.hospitalModel=e.hospital,this.form.setValue({name:e.name,hospital:this.hospitalModel._id})):(this.router.navigateByUrl("/doctors"),this.toastr.error("doctor not found","find doctor failed!",{closeButton:!0,timeOut:3e3}))},e=>{this.toastr.error(e.error.message,"find doctor failed!",{closeButton:!0,timeOut:3e3}),this.router.navigateByUrl("/doctors")})}handleSumbit(){if(this.form.invalid)return;const e=this.form.value;this.doctor?this.updateDoctor(this.doctor._id,e):this.createDoctor(e)}createDoctor(e){this.doctorService.save(e).subscribe(e=>{this.toastr.success(`Doctor ${e.name} has been successfully created.`,"Congratulations",{closeButton:!0,timeOut:3e3}),this.router.navigateByUrl("/doctor/"+e._id)},e=>{console.log(e),this.toastr.error(e.error.message,"Create doctor failed!",{closeButton:!0,timeOut:3e3})})}updateDoctor(e,t){this.doctorService.update(e,t).subscribe(e=>{this.toastr.success(`Doctor ${e.name} has been successfully updated.`,"Congratulations",{closeButton:!0,timeOut:3e3})},e=>this.toastr.error(e.error.message,"Update doctor failed!",{closeButton:!0,timeOut:3e3}))}isUserAdmin(){return!0}openUploadImageModal(){this.modalUploadService.openModal("doctor",this.doctor._id,this.doctor.name,this.doctor.image)}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(ee),a.Sb(Z),a.Sb(H.b),a.Sb(s.c),a.Sb(s.a),a.Sb(o.c),a.Sb(A.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-doctor-form"]],decls:32,vars:6,consts:[[1,"row"],[1,"col-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"form-material","m-t-40",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","name","type","text",1,"form-control","form-control-line"],["formControlName","hospital",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["routerLink","/doctors",1,"btn","btn-danger","ml-2"],[1,"fa","fa-backward"],[1,"col-md-4"],[4,"ngIf"],["align","center",1,"form-group"],["class","w150 img-thumbnail",3,"src","alt",4,"ngIf"],["class","col-md-4",4,"ngIf"],[3,"value"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-save"],[1,"w150","img-thumbnail",3,"src","alt"],[1,"w150","img-fluid","pointer",3,"src","alt","click"],["type","button",1,"btn","btn-block","btn-success","waves-effect","waves-light","m-r-10",3,"click"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"h4",4),a.Cc(5,"Doctor Information"),a.Xb(),a.Yb(6,"form",5),a.gc("ngSubmit",(function(){return t.handleSumbit()})),a.Yb(7,"div",6),a.Yb(8,"label"),a.Cc(9,"Full Name"),a.Xb(),a.Tb(10,"input",7),a.Xb(),a.Yb(11,"div",6),a.Yb(12,"label"),a.Cc(13,"Hospital"),a.Xb(),a.Yb(14,"select",8),a.Yb(15,"option",9),a.Cc(16,"Select an hospital"),a.Xb(),a.Bc(17,Xe,2,2,"option",10),a.Xb(),a.Xb(),a.Bc(18,ke,3,1,"button",11),a.Yb(19,"a",12),a.Tb(20,"i",13),a.Cc(21," Cancel"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(22,"div",14),a.Yb(23,"div",2),a.Yb(24,"div",3),a.Yb(25,"h4",4),a.Cc(26,"Hospital Information"),a.Xb(),a.Yb(27,"div",6),a.Bc(28,Ce,2,1,"label",15),a.Xb(),a.Yb(29,"div",16),a.Bc(30,ye,2,5,"img",17),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Bc(31,we,14,6,"div",18),a.Xb()),2&e&&(a.Hb(6),a.oc("formGroup",t.form),a.Hb(11),a.oc("ngForOf",t.hospitals),a.Hb(1),a.oc("ngIf",t.isUserAdmin()),a.Hb(10),a.oc("ngIf",t.hospitalModel._id),a.Hb(2),a.oc("ngIf",t.hospitalModel._id),a.Hb(1),a.oc("ngIf",t.doctor))},directives:[o.t,o.j,o.g,o.b,o.i,o.e,o.q,o.m,o.s,P.j,P.k,s.f],pipes:[U.a],encapsulation:2}),e})();const Ie=function(){return["/users"]};function Te(e,t){if(1&e&&(a.Yb(0,"tr",9),a.Yb(1,"td",10),a.Tb(2,"img",11),a.lc(3,"image"),a.Xb(),a.Yb(4,"td"),a.Cc(5),a.Xb(),a.Xb()),2&e){const e=t.$implicit;a.oc("routerLink",a.pc(6,Ie)),a.Hb(2),a.oc("src",a.nc(3,3,e.image,"user"),a.yc),a.Hb(3),a.Dc(e.name)}}function He(e,t){if(1&e&&(a.Yb(0,"table",7),a.Yb(1,"tbody"),a.Bc(2,Te,6,7,"tr",8),a.Xb(),a.Xb()),2&e){const e=a.kc();a.Hb(2),a.oc("ngForOf",e.users)}}function Pe(e,t){1&e&&(a.Yb(0,"div",12),a.Tb(1,"i",13),a.Cc(2," No users found. "),a.Yb(3,"button",14),a.Yb(4,"span",15),a.Cc(5,"\xd7"),a.Xb(),a.Xb(),a.Xb())}const Ue=function(){return["/hospitals"]};function Be(e,t){if(1&e&&(a.Yb(0,"tr",9),a.Yb(1,"td",10),a.Tb(2,"img",11),a.lc(3,"image"),a.Xb(),a.Yb(4,"td"),a.Cc(5),a.Xb(),a.Xb()),2&e){const e=t.$implicit;a.oc("routerLink",a.pc(6,Ue)),a.Hb(2),a.oc("src",a.nc(3,3,e.image,"hospital"),a.yc),a.Hb(3),a.Dc(e.name)}}const xe=function(e){return["/doctor",e]};function Oe(e,t){if(1&e&&(a.Yb(0,"tr",9),a.Yb(1,"td",10),a.Tb(2,"img",11),a.lc(3,"image"),a.Xb(),a.Yb(4,"td"),a.Cc(5),a.Xb(),a.Xb()),2&e){const e=t.$implicit;a.oc("routerLink",a.qc(6,xe,e._id)),a.Hb(2),a.oc("src",a.nc(3,3,e.image,"doctor"),a.yc),a.Hb(3),a.Dc(e.name)}}let De=(()=>{class e{constructor(e,t){this.route=e,this.http=t,this.users=[],this.hospitals=[],this.doctors=[]}ngOnInit(){this.route.params.subscribe(e=>{this.search(e.text)})}search(e){return this.http.get(`${q.a.hospitalServiceUrl}/search/all/${e}?limit=1000`).subscribe(e=>{this.users=e.users.docs,this.hospitals=e.hospitals.docs,this.doctors=e.doctors.docs})}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(s.a),a.Sb(w.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["app-search"]],decls:24,vars:7,consts:[[1,"row"],[1,"col-4"],[1,"card"],[1,"card-body"],[1,"card-title"],["class","table table-hover",4,"ngIf"],["class","alert info",4,"ngIf"],[1,"table","table-hover"],["class","pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"pointer",3,"routerLink"],[1,"w70"],[1,"img-50","img-circle","pointer",3,"src"],[1,"alert","info"],[1,"ti-user"],["type","button","data-dismiss","alert","aria-label","Close",1,"close"],["aria-hidden","true"]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"h4",4),a.Cc(5),a.Xb(),a.Bc(6,He,3,1,"table",5),a.Bc(7,Pe,6,0,"div",6),a.Xb(),a.Xb(),a.Xb(),a.Yb(8,"div",1),a.Yb(9,"div",2),a.Yb(10,"div",3),a.Yb(11,"h4",4),a.Cc(12),a.Xb(),a.Yb(13,"table",7),a.Yb(14,"tbody"),a.Bc(15,Be,6,7,"tr",8),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(16,"div",1),a.Yb(17,"div",2),a.Yb(18,"div",3),a.Yb(19,"h4",4),a.Cc(20),a.Xb(),a.Yb(21,"table",7),a.Yb(22,"tbody"),a.Bc(23,Oe,6,8,"tr",8),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()),2&e&&(a.Hb(5),a.Ec("Users (",t.users.length,")"),a.Hb(1),a.oc("ngIf",t.users.length>0),a.Hb(1),a.oc("ngIf",0==t.users.length),a.Hb(5),a.Ec("Hospitals (",t.hospitals.length,")"),a.Hb(3),a.oc("ngForOf",t.hospitals),a.Hb(5),a.Ec("Doctors (",t.doctors.length,")"),a.Hb(3),a.oc("ngForOf",t.doctors))},directives:[P.k,P.j,s.d],pipes:[U.a],encapsulation:2}),e})();const Me=[{path:"dashboard",component:r,data:{title:"Dashboard"},canActivate:[y.a]},{path:"account-setting",component:p,data:{title:"Account Setting"},canActivate:[y.a]},{path:"progress",component:l,data:{title:"Progress"},canActivate:[y.a]},{path:"chart",component:u,data:{title:"Chart"},canActivate:[y.a]},{path:"promises",component:g,data:{title:"Promises"},canActivate:[y.a]},{path:"rxjs",component:C,data:{title:"RxJs"},canActivate:[y.a]},{path:"profile",component:O,data:{title:"Profile"},canActivate:[y.a]},{path:"users",component:F,data:{title:"Users"},canActivate:[(()=>{class e{constructor(e,t,i){this.userUService=e,this.router=t,this.authGuard=i}canActivate(e,t){if(!this.authGuard.canActivate(e,t))return!1;const i=localStorage.getItem("APP-TOKEN");return JSON.parse(atob(i.split(".")[1])).roles.includes("ROLE_ADMIN")}}return e.\u0275fac=function(t){return new(t||e)(a.cc(S.a),a.cc(s.c),a.cc(y.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]},{path:"hospitals",component:W,data:{title:"Hospitals"},canActivate:[y.a]},{path:"doctors",component:ce,data:{title:"Doctors"},canActivate:[y.a]},{path:"doctor",component:Se,data:{title:"New Doctor"},canActivate:[y.a]},{path:"doctor/:id",component:Se,data:{title:"Edit Doctor"},canActivate:[y.a]},{path:"search/:text",component:De,data:{title:"Search"},canActivate:[y.a]},{path:"",redirectTo:"/dashboard",pathMatch:"full",canActivate:[y.a]}];let Ae=(()=>{class e{}return e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({factory:function(t){return new(t||e)},imports:[[s.g.forChild(Me)],s.g]}),e})()}}]);